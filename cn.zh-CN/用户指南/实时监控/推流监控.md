# 推流监控 {#concept_aq2_xsx_nfb .concept}

直播的监控分为推流质量监控和播放质量监控。大部分的直播卡顿等问题都受到推流质量的影响。通过实时监测推流的质量可以及时定位直播中的卡顿、延时等问题。本文介绍推流监控的操作步骤、直播流详情、及推流监控项的含义、场景。

推流监控是秒级监控，实时返回每秒钟的推流监控数据，包括 **主播到CDN节点的接收音视频帧率**、**音视频时间戳**、**接受头次数**、**音视频码率（Kbps）**、**最大音视频帧间隔（毫秒）** 和 **推流断开错误码**。通过查看每秒中视频流的状态可判断推流的稳定性，及时对直播的内容进行监测，减少观看视频时的卡顿影响。

## 操作步骤 {#section_ggr_2t3_wfb .section}

1.  登录 [视频直播控制台](https://live.console.aliyun.com/?spm=5176.2020520001.aliyun_sidebar.aliyun_sidebar_live.6edb4bd3fRwj48#/overview)。
2.  在左侧导航栏中，单击 **数据监控** \> **实时监控**。
3.  选择正在推流的域名、时间段、应用名称和流名称，并单击 **查询**。
    -   如果您想要实时获取监控信息，可以选择 **10分钟实时监控**。界面会每分钟请求一次数据，及时返回1分钟内每秒中的推流状态。
    -   如果查看历史的监控信息，也可以选择 **近半小时**、**近1小时**，以及 **自定义** 的监控时间。查询的时间跨度最大支持1天查询。
    -   关于监控项的详细信息，请您参考以下内容。

## 流详情 {#section_up5_dt3_wfb .section}

|流监控|含义|场景|
|:--|:-|:-|
|推流地址|主播的推流地址。格式：rtmp://domainName/appName/streamName。|查看推流地址。|
|AppName|流的应用名称。|查看应用名。|
|StreamName|主播推的流的流名。|查看流名。|
|开始推流时间|主播单次推流的开始推流时间。|查看开始推流时间点。|
|接受推流时间|主播单次推流的结束推流时间。|查看结束推流时间点。|
|推流主播IP|主播推流端的IP地址。|监控主播端IP。|
|编码信息|主播所推直播流的metadata。格式：\{视频编码\}\{分辨率\}/\{音频编码\}\{音频采样率\}。视频编码、分辨率、音频编码和音频采样率分别采集自meta的videocodecid,frame\_rate, audiocodecid和aac header。|监控流的编码信息。|
|历史推流记录|主播针对同一路流名，其不同的推断流记录。|监控主播的推断流时间点。|

## 主播到CDN节点的接受音视频帧率 {#section_bxc_ft3_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|视频帧率|服务端每秒采集的接受视频帧数。|监控主播到服务器端的上行视频帧率稳定性。|
|音频帧率|服务端每秒采集的接受的音频帧数。|监控主播到服务器端的上行音频帧率稳定性。|

## 音视频时间戳 {#section_ukg_f53_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|视频时间戳|服务器端采集的每秒最后一帧视频帧所携带的视频时间戳（单位：毫秒）。**说明：** 采集的一秒周期内如果没有收到视频帧，则设置为-1。

|监控视频时间戳的单调性。|
|音频时间戳|服务器端采集的每秒最后一帧音频帧所携带的音频时间戳（单位：毫秒）。**说明：** 采集的一秒周期内如果没有收到音频帧，那么设置为-1。

|监控音频时间戳的单调性。|
|音视频时间戳差值|以上采集的视频时间戳和音频时间戳所得出的差值（单位：毫秒）。|通过监控音视频时间戳差值的趋势进而判断主播推流音视频时间戳是否同步。|

## 接受头次数 {#section_h2m_f53_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|AVC|服务器端采集的接受主播端推流的AVC sequence header的累计次数。|监控主播端推的AVC sequence header 次数。|
|AAC|服务器端采集的接受主播推流的AAC sequence header的累计次数。|监控主播端推的AAC sequence header 次数。|

## 音视频码率 {#section_jsf_w53_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|视频码率|服务器端每秒采集的视频码率（单位：Kbps）。|监控主播推流的视频码率。|
|音频码率|服务器端每秒采集的音频码率（单位：Kbps）。|监控主播推流的音频码率。|

## 最大音视频帧间隔 {#section_fp2_bv3_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|视频帧间隔|服务端每秒采集的最大的视频帧之间的时间戳间隔。|监控视频帧本身的时间戳是否出现跳变。|
|音频帧间隔|服务端每秒采集的最大的音频帧之间的时间戳间隔。|监控音频帧本身的时间戳是否出现跳变。|

## 推流断开错误码 {#section_a2w_2v3_wfb .section}

|监控项|含义|场景|
|:--|:-|:-|
|错误码|服务器端每秒采集的推流断开错误码。|监控主播推流断开的原因。常见错误码如下：-   2：推流端主动断开；
-   1,3,4,6：客户端连接发送超时；
-   101：被断流接口踢掉；
-   103：推流端超过10秒没有发送数据；
-   104,106：chunk stream id太大，数值超过32；
-   105：推流一帧数据大小超过限制，超过5,242,880字节；
-   122,123：推流鉴权不通过；
-   125：推流时相同名称的流在中心已存在；
-   其他错误码：若出现其他错误码，请您截图提交工单与我们联系。

 |

